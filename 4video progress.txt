1ï¸âƒ£ Saving video progress
2ï¸âƒ£ Showing progress in Dashboard (real-time)
3ï¸âƒ£ Unlocking Quiz (20 MCQ + 2 Coding) ONLY after all videos are completed

This is written exactly for your current system (AI monitoring + Firebase Free plan + dashboard UI).

ğŸ¥ VIDEO PROGRESS â†’ DASHBOARD â†’ QUIZ UNLOCK
(FULL LOGIC + DATA + UI FLOW)
ğŸ¯ OVERALL RULES (CLEAR & STRICT)
âœ… Video progress is counted ONLY if:

Camera is ON

AI Monitoring is ACTIVE

Face is detected

Tab is active

Video not excessively skipped

âŒ If any rule fails:

Video pauses

Timer pauses

Progress not counted

Nothing saved

ğŸ§± STEP 1: VIDEO PROGRESS TRACKING (LOCAL FIRST)
While video is playing:

Track valid watch time locally

Update every second only in memory

validWatchTime += 1; // only if monitoringActive && focused


âŒ Do NOT write every second to Firebase (free plan rule)

â±ï¸ SAVE PROGRESS (SAFE WAY)
Save progress ONLY when:

Video paused

Every 30â€“60 seconds

Video completed

User leaves page

saveVideoProgress({
  courseId,
  videoId,
  watchedSeconds,
  completed: false
});

ğŸ§  STEP 2: VIDEO COMPLETION LOGIC

A video is marked COMPLETED if:

(validWatchTime / totalDuration) >= 90%
AND tabSwitch <= 10
AND faceMissing <= 10
AND autoPause <= 10

When completed:
markVideoCompleted(videoId);

ğŸ’¾ STEP 3: FIREBASE DATA STRUCTURE (OPTIMIZED)
ğŸ”¹ Per User â†’ Courses â†’ Videos
users: {
  uid: {
    courses: {
      web: {
        totalVideos: 10,
        completedVideos: 3,
        progress: 30,
        quizUnlocked: false
      }
    },
    videos: {
      web_video_1: {
        completed: true,
        watchTime: 320,
        violations: {
          tabSwitch: 2,
          faceMissing: 1
        }
      }
    }
  }
}


âœ” Small
âœ” Free-plan safe
âœ” Easy dashboard read

ğŸ“Š STEP 4: COURSE PROGRESS CALCULATION
Formula:
courseProgress =
(completedVideos / totalVideos) Ã— 100

Example:

Completed videos: 5

Total videos: 10

â¡ï¸ Progress = 50%

Saved to:

courses.web.progress = 50

ğŸ“ˆ STEP 5: DASHBOARD DISPLAY (REAL-TIME)
Dashboard shows:

Course name

Progress bar

Percentage text

Status: In Progress / Completed

Firebase listener:
onValue(ref(db, `users/${uid}/courses`), snapshot => {
  setCourses(snapshot.val());
});


âœ” Live updates
âœ” No refresh
âœ” Minimal reads

ğŸ§® STEP 6: OVERALL PROGRESS (ALL COURSES)
Formula:
overallProgress =
average of all course progress


Example:

Web: 100%

App: 50%

Game: 0%

â¡ï¸ Overall = 50%

Shown in dashboard live.

ğŸ§© STEP 7: QUIZ UNLOCK LOGIC (IMPORTANT)
Rule:

Quiz unlocks ONLY if ALL videos of a course are completed

Condition:
if (completedVideos === totalVideos) {
  unlockQuiz(courseId);
}

ğŸ”“ STEP 8: UNLOCK 20 MCQ + 2 CODING QUESTIONS
Firebase update:
courses: {
  web: {
    quizUnlocked: true
  }
}

Dashboard / Quiz UI Behavior:
State	UI
Videos incomplete	ğŸ”’ Quiz Locked
All videos completed	âœ… Quiz Available
Quiz unlocked	Start Quiz button enabled
ğŸ“ QUIZ STRUCTURE (PER COURSE)

Each unlocked quiz contains:

20 MCQ

2 Coding Questions

Example:
quiz: {
  mcq: 20,
  coding: 2
}

ğŸ” STEP 9: PREVENT CHEATING (CRITICAL)

âœ” Quiz button disabled until unlocked
âœ” Firebase rules prevent manual unlock
âœ” UI + backend enforce same logic

ğŸ“ VIVA-READY EXPLANATION (SHORT)

â€œVideo progress is tracked using AI monitoring and saved to Firebase only at safe intervals. Course progress updates in real time on the dashboard. Once all videos in a course are validly completed, the system automatically unlocks a quiz containing 20 MCQs and 2 coding questions.â€

âœ… FINAL CHECKLIST (YOU SHOULD HAVE)

âœ” Valid watch-time tracking
âœ” Firebase-safe writes
âœ” Course progress calculation
âœ” Dashboard real-time update
âœ” Overall progress calculation
âœ” Quiz locked by default
âœ” Quiz unlock after full completion